/* Global Resets and Modern Base Styles */
*,
*::before,
*::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html {
  font-size: 14px; /* Base for rem units if desired - Increased by 1px */
  height: 100%;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

body {
  font-family: 'Microsoft YaHei', sans-serif; /* Changed to Microsoft YaHei */
  line-height: 1.6; /* Adjusted for new font and increased size */
  background-color: var(--page-bg);
  color: var(--text-color);
  padding: 20px; /* Reduced padding around the app */
  transition: background-color 0.3s ease, color 0.3s ease;
  min-height: 100vh;
  overflow-x: hidden; /* Prevent horizontal scroll on body */
}

/* CSS Variables - New Theme */
:root {
  /* Original color variables from before "flashy" theme */
  --app-bg: #f0f2f5; /* Lighter app background for contrast */
  --sidebar-bg-color: #ffffff; /* Keep sidebar white for now, or make slightly off-white */
  --main-content-bg-color: #f0f2f5; /* Lighter main content background */
  --container-bg-color-original: #ffffff; /* Keep content boxes white */
  
  --primary-color: #0077cc; /* Slightly adjusted primary blue */
  --primary-color-hover: #0066bb;
  --primary-color-active: #0055aa;

  --text-color: #1f1f1f; /* Darker text for contrast */
  --text-color-muted: #595959; /* Darker muted text for contrast */
  --text-on-primary-color: #ffffff;

  --border-color-soft: #d1d1d1; /* Stronger soft border */
  --border-color-strong: #b3b3b3; /* Stronger strong border */
  
  --input-bg: #ffffff;
  --input-focus-ring: rgba(0, 119, 204, 0.2); /* Adjusted focus ring */

  /* Variables for nav links */
  --nav-link-color: #404040; /* Darker nav link color */
  --nav-link-hover-bg: #e8e8e8; /* Slightly darker hover for nav links */
  --nav-link-hover-color: var(--primary-color-hover);
  --nav-link-active-text: #ffffff;

  /* Secondary button colors */
  --button-secondary-bg: #e0e0e0; /* Darker secondary button */
  --button-secondary-text: #2c2c2c; /* Darker text for secondary button */
  --button-secondary-hover-bg: #d1d1d1; /* Darker hover for secondary button */
  --button-secondary-border: #b8b8b8; /* Stronger border for secondary button */
  
  /* Shadow and border-radius variables */
  --shadow-sm: 0 1px 3px 0 rgba(0, 0, 0, 0.05); /* Softer shadows */
  --shadow-md: 0 3px 6px -1px rgba(0, 0, 0, 0.07), 0 2px 4px -1px rgba(0, 0, 0, 0.04);
  --shadow-lg: 0 8px 16px -3px rgba(0, 0, 0, 0.08), 0 4px 6px -2px rgba(0, 0, 0, 0.05);

  --border-radius-sm: 4px;  /* Slightly smaller for a sharper look */
  --border-radius-md: 6px;
  --border-radius-lg: 10px;
  --border-radius-xl: 12px;

  /* Page background variable */
  --page-bg: #f8f9fa; /* Kept light for overall page */

  /* Error Colors */
  --error-text-color: #c0392b; /* More modern red */
  --error-border-color: #e74c3c;
  --error-focus-ring: rgba(231, 76, 60, 0.25);
}

body.dark-mode {
  /* Original dark mode color variables */
  --app-bg: #121212; /* Even darker app background */
  --sidebar-bg-color: #1e1e1e; /* Darker sidebar */
  --main-content-bg-color: #121212; /* Even darker main content */
  --container-bg-color-original: #1e1e1e; /* Darker content boxes */

  --primary-color: #0088dd; /* Brighter blue for dark mode */
  --primary-color-hover: #0077cc;
  --primary-color-active: #0066bb;
  
  --text-color: #f5f5f5; /* Brighter text for contrast */
  --text-color-muted: #b3b3b3; /* Brighter muted text */
  /* --text-on-primary-color: #ffffff; remains same */

  --border-color-soft: #4a4a4a; /* Lighter soft border for dark mode */
  --border-color-strong: #6b6b6b; /* Lighter strong border for dark mode */

  --input-bg: #2c2c2c;
  --input-focus-ring: rgba(0, 136, 221, 0.3);

  /* Variables for nav links */
  --nav-link-color: #cccccc; /* Brighter nav link color */
  --nav-link-hover-bg: #3f3f3f; /* Lighter hover for nav links */
  --nav-link-hover-color: var(--primary-color-hover);
  /* --nav-link-active-text: #ffffff; remains same */

  /* Secondary button colors for dark mode */
  --button-secondary-bg: #3f3f3f; /* Lighter secondary button */
  --button-secondary-text: #f0f0f0; /* Brighter text for secondary button */
  --button-secondary-hover-bg: #4d4d4d; /* Lighter hover for secondary button */
  --button-secondary-border: #666666; /* Lighter border for secondary button */

  /* Shadow and border-radius variables */
  /* Using the same softer shadows, but they will appear different on dark bg */
  --shadow-sm: 0 1px 3px 0 rgba(0, 0, 0, 0.15); /* Slightly more pronounced for dark */
  --shadow-md: 0 3px 6px -1px rgba(0, 0, 0, 0.18), 0 2px 4px -1px rgba(0, 0, 0, 0.12);
  --shadow-lg: 0 8px 16px -3px rgba(0, 0, 0, 0.20), 0 4px 6px -2px rgba(0, 0, 0, 0.15);
  
  /* Page background variable */
  --page-bg: #121212; /* Kept very dark for overall page */

  /* Error Colors for Dark Mode */
  --error-text-color: #ff7675; /* Brighter, more accessible red text */
  --error-border-color: #d63031;
  --error-focus-ring: rgba(214, 48, 49, 0.35);
}

/* App Layout */
.app-layout {
  display: flex;
  height: calc(100vh - 48px); /* Adjusted for new body padding */
  background-color: var(--app-bg);
  border-radius: var(--border-radius-xl);
  border: 1px solid var(--border-color-soft); /* Softer border for app layout */
  box-shadow: var(--shadow-lg);
  overflow: hidden;
}

.sidebar {
  width: 220px; /* Reduced */
  flex-shrink: 0;
  background-color: var(--sidebar-bg-color);
  padding: 20px 16px; /* Reduced */
  border-right: 1px solid var(--border-color-soft);
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  transition: background-color 0.3s ease, border-color 0.3s ease;
}

.sidebar-header {
  margin-bottom: 20px; /* Reduced */
  padding-bottom: 10px; /* Reduced */
  border-bottom: 1px solid var(--border-color-soft); /* Softer border */
}

.sidebar-header h2 {
  margin: 0;
  font-size: 1.15em; /* Increased */
  font-weight: 600;
  color: var(--text-color);
  /* display: flex; and align-items: center; no longer needed for emoji */
}

/* Removed .sidebar-header h2 svg.heroicon styles */

.sidebar nav ul {
  list-style: none;
}

.sidebar nav li a.nav-link {
  display: block;
  padding: 8px 12px; /* Reduced */
  text-decoration: none;
  color: var(--nav-link-color);
  border-radius: var(--border-radius-md);
  margin-bottom: 4px; /* Reduced */
  font-weight: 500;
  transition: background-color 0.3s cubic-bezier(0.25, 0.1, 0.25, 1), color 0.3s cubic-bezier(0.25, 0.1, 0.25, 1), transform 0.2s cubic-bezier(0.25, 0.1, 0.25, 1);
}

.sidebar nav li a.nav-link:hover {
  background-color: var(--nav-link-hover-bg);
  color: var(--nav-link-hover-color);
  transform: translateX(3px) scale(1.01); /* Apple-like hover */
}

.sidebar nav li a.nav-link.active {
  background-color: var(--primary-color);
  color: var(--nav-link-active-text);
  font-weight: 600;
  box-shadow: none; /* Removed shadow for a flatter active state */
}
.sidebar nav li a.nav-link.active:hover {
  background-color: var(--primary-color-hover);
  transform: translateX(0) scale(1);
}


.main-content {
  flex-grow: 1;
  padding: 20px; /* Reduced */
  overflow-y: auto;
  background-color: var(--main-content-bg-color);
  display: flex;
  flex-direction: column;
}

.view-container {
  width: 100%;
  flex-grow: 1; /* Make view-container fill .main-content */
  display: flex;
  flex-direction: column;
  /* Removed flex properties, let content flow naturally */
}

.container { /* Inner content wrapper for each view */
  width: 100%;
  padding: 0; /* Padding will be on sections */
  background-color: transparent; /* No separate background for this container */
  flex-grow: 1; /* Allow container to fill .view-container */
  display: flex;
  flex-direction: column;
}

.container > h2 { /* View Titles */
  font-size: 1.5em; /* Increased */
  font-weight: 600;
  color: var(--text-color);
  margin-bottom: 20px; /* Reduced */
  padding-bottom: 10px; /* Reduced */
  border-bottom: 1px solid var(--border-color-soft);
  line-height: 1.3;
  /* display: flex; and align-items: center; no longer needed for emoji */
}

/* Styles for title with description */
.title-with-description {
  display: flex;
  align-items: baseline; /* Align baseline of h2 and span */
  justify-content: space-between; /* Push description to the right if space allows, or wrap */
  flex-wrap: wrap; /* Allow description to wrap on smaller screens */
  border-bottom: 1px solid var(--border-color-soft);
  padding-bottom: 10px; /* Reduced */
  margin-bottom: 20px; /* Reduced */
}

.title-with-description h2 {
  margin-bottom: 0; /* Remove bottom margin from h2 as padding is on parent */
  padding-bottom: 0; /* Remove bottom padding from h2 */
  border-bottom: none; /* Remove border from h2 as it's on parent */
  flex-shrink: 0; /* Prevent h2 from shrinking */
}

.feature-description {
  font-size: 0.78em; /* Smaller font size */
  color: var(--text-color-muted);
  margin-left: 15px; /* Space between title and description */
  font-weight: 400;
  line-height: 1.5;
  flex-shrink: 1; /* Allow description to shrink and wrap */
  text-align: right; /* Align text to the right if it wraps on its own line */
}

/* Removed .container > h2 svg.heroicon styles */

/* Sections within views */
.section {
  margin-bottom: 14px; /* Reduced */
  padding: 14px;       /* Reduced */
  background-color: var(--container-bg-color-original);
  border: 1px solid var(--border-color-soft); 
  /* Softer border */
  border-radius: var(--border-radius-lg); /* Kept large radius for cards */
  box-shadow: var(--shadow-sm); /* Softer shadow for sections */
  transition: background-color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
}
.section:last-child {
  margin-bottom: 0;
}

/* Labels */
label {
  display: flex; /* Changed to flex to align hint to the right */
  justify-content: space-between; /* Pushes hint to the right */
  align-items: baseline; /* Align text baselines */
  margin-bottom: 4px; /* Reduced */
  font-weight: 500;
  color: var(--text-color-muted); /* Muted color for labels */
  font-size: 0.85em; /* Increased */
}

/* Buttons */
button, #themeToggleBtn { /* General button reset and base style */
  padding: 8px 16px; /* Reduced */
  border: 1px solid transparent;
  border-radius: var(--border-radius-md);
  cursor: pointer;
  font-size: 0.9em; /* Increased */
  font-weight: 500; /* Less bold for general buttons */
  transition: all 0.3s cubic-bezier(0.25, 0.1, 0.25, 1);
  letter-spacing: 0.2px; /* Less spacing */
  text-align: center;
  box-shadow: none; /* Removed default shadow, add on hover */
}

button:hover, #themeToggleBtn:hover { /* themeToggleBtn hover is handled separately later */
  transform: translateY(-2px) scale(1.02); /* Apple-like hover */
  box-shadow: var(--shadow-md); /* Slightly more pronounced shadow on hover */
}

button:active, #themeToggleBtn:active { /* themeToggleBtn active is handled separately later */
  transform: translateY(0px) scale(0.98); /* Apple-like active */
  box-shadow: none;
}

/* Secondary button styles (e.g., Clear button) */
.btn-secondary {
  background-color: var(--button-secondary-bg);
  color: var(--button-secondary-text);
  border: 1px solid var(--button-secondary-border);
  font-weight: 500; /* Consistent with general button */
}

.btn-secondary:hover {
  background-color: var(--button-secondary-hover-bg);
  /* Adjust border color on hover for better feedback */
  border-color: color-mix(in srgb, var(--button-secondary-border) 85%, var(--text-color) 15%);
  color: var(--button-secondary-text); /* Text color typically doesn't change on hover for secondary */
}

.btn-secondary:active {
  background-color: color-mix(in srgb, var(--button-secondary-hover-bg) 90%, var(--text-color) 10%); /* Darken/lighten hover bg */
  border-color: color-mix(in srgb, var(--button-secondary-border) 70%, var(--text-color) 30%); /* Further emphasize border */
  /* transform and box-shadow are handled by general button:active */
}

.btn-primary {
  /* Icon suggestion: Consider icons for common actions like "Select File", "Process" e.g. <svg>...</svg> Open File */
  background-color: var(--primary-color);
  color: var(--text-on-primary-color);
  border-color: var(--primary-color);
  font-weight: 600;
}
.btn-primary:hover {
  background-color: var(--primary-color-hover);
  border-color: var(--primary-color-hover);
}
.btn-primary:active {
  background-color: var(--primary-color-active);
  border-color: var(--primary-color-active);
}

.btn-primary.processing {
  /* The base background color is still var(--primary-color) from .btn-primary */
  background-image: linear-gradient(
    -45deg,
    rgba(255, 255, 255, 0.15) 25%,
    transparent 25%,
    transparent 50%,
    rgba(255, 255, 255, 0.15) 50%,
    rgba(255, 255, 255, 0.15) 75%,
    transparent 75%,
    transparent
  );
  background-size: 40px 40px; /* Size of the repeating stripes */
  animation: progress-bar-stripes 1s linear infinite;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

@keyframes progress-bar-stripes {
  from {
    background-position: 40px 0;
  }
  to {
    background-position: 0 0;
  }
}

.action-button {
  background-color: var(--button-secondary-bg);
  color: var(--button-secondary-text);
  border: 1px solid var(--button-secondary-border); /* Ensure border is explicitly set */
  font-weight: 500;
}
.action-button:hover {
  background-color: var(--button-secondary-hover-bg);
  border-color: color-mix(in srgb, var(--button-secondary-border) 80%, var(--text-color));
}

/* General disabled button styles */
button:disabled,
button[disabled] { /* Cover both attribute forms */
  cursor: not-allowed !important;
  opacity: 0.65; /* General opacity for disabled state, adjust as needed */
  /* Prevent hover/active effects on disabled buttons */
  transform: none !important;
  box-shadow: none !important;
}

/* Disabled state for secondary buttons (like 'Clear') */
.btn-secondary:disabled,
.btn-secondary[disabled] {
  background-color: #e9ecef; /* Light mode: Very light grey, standard muted bg */
  color: #6c757d;            /* Light mode: Muted grey text */
  border-color: #ced4da;      /* Light mode: Soft grey border */
  /* Opacity is handled by the general button:disabled rule */
  /* Ensure hover/active specific styles from .btn-secondary don't apply */
}

.btn-secondary:disabled:hover,
.btn-secondary[disabled]:hover {
  background-color: #e9ecef !important; /* Keep background same as disabled */
  border-color: #ced4da !important;   /* Keep border same as disabled */
  /* transform and box-shadow are already reset by general button:disabled */
}


/* Dark mode disabled state for secondary buttons */
body.dark-mode .btn-secondary:disabled,
body.dark-mode .btn-secondary[disabled] {
  background-color: #2c2f33; /* Dark mode: Dark, slightly desaturated grey */
  color: #72767d;            /* Dark mode: Muted grey text, visible on dark bg */
  border-color: #3a3e42;      /* Dark mode: Darker border */
}

body.dark-mode .btn-secondary:disabled:hover,
body.dark-mode .btn-secondary[disabled]:hover {
  background-color: #2c2f33 !important; /* Keep background same as disabled */
  border-color: #3a3e42 !important;   /* Keep border same as disabled */
}


/* Inputs and Selects */
input[type="text"],
input[type="number"],
select {
padding: 6px 10px; /* Reduced */
margin-bottom: 8px; /* Reduced */
border: 1px solid var(--border-color-soft); /* Softer border for light mode */
border-radius: var(--border-radius-sm); /* Sharper corners */
box-sizing: border-box;
font-size: 0.9em; /* Increased */
background-color: var(--input-bg);
color: var(--text-color);
transition: border-color 0.2s ease, box-shadow 0.2s ease;
width: 100%;
}

input[type="text"]:focus,
input[type="number"]:focus,
select:focus {
  border-color: var(--primary-color);
  box-shadow: 0 0 0 2px var(--input-focus-ring); /* Softer focus ring */
  outline: none;
}

/* Input Error Styling */
.input-error {
  border-color: var(--error-border-color) !important;
}

.input-error:focus {
  border-color: var(--error-border-color) !important; /* Keep border red on focus */
  box-shadow: 0 0 0 2px var(--error-focus-ring) !important; /* Softer red focus ring */
}

.error-message {
  display: none; /* Hidden by default, JS will override with display: block */
  margin-top: 5px; /* Space from the input above */
  font-size: 0.8em; /* Increased */
  color: var(--error-text-color) !important;
}

.field-hint {
  font-size: 0.75em; /* Smaller than error message */
  color: var(--text-color-muted);
  opacity: 0.85;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  display: inline-block; /* To allow text-overflow to work */
  max-width: 180px; /* Adjust as needed, can be a bit wider now */
  text-align: right; /* Ensure text within the hint is right-aligned if it wraps (though it shouldn't) */
  margin-left: auto; /* Pushes the hint to the right in a flex container */
}

/* Specific adjustments for hints inside labels to align better */
label > .field-hint {
  font-weight: normal; /* Hints shouldn't be bold like labels */
  /* margin-left: auto; will be inherited or can be re-stated if needed */
}

/* Adjustments for hints next to file selection status or input groups */
/* Ensure .field-wrapper is also a flex container if hints are direct children and need right alignment */
.field-wrapper {
  display: flex;
  flex-wrap: wrap; /* Allow items to wrap */
  align-items: center; /* Align items vertically */
  gap: 8px; /* Consistent gap */
}

.field-wrapper > .file-select-status-span + .field-hint {
  /* This targets hints immediately following a file selection span */
  margin-left: auto; /* Push to the right */
  flex-shrink: 0; /* Prevent hint from shrinking too much if file name is long */
}

.dimension-inputs-container .field-wrapper {
    /* field-wrapper within dimension-inputs-container is already flex-column */
    /* so margin-left: auto on the hint should work if the hint is a direct child */
    /* If hint is after input-group, then input-group needs to not take full width, or parent needs to be row flex */
     align-items: stretch; /* Override previous align-items: center for dimension inputs */
}

.dimension-inputs-container .field-wrapper .field-hint {
    text-align: right;
    width: 100%; /* Allow hint to take full width to align text right */
    margin-left: 0; /* Reset margin-left if it's taking full width */
    margin-top: 3px; /* Small space above the hint */
    max-width: none; /* Override max-width for this specific case */
}


.dimension-inputs-container {
  margin-top: 12px; /* Reduced */
  display: flex;
  gap: 12px; /* Reduced */
  align-items: center;
}

.dimension-inputs-container .input-group {
  position: relative;
  display: flex;
  flex: 1;
}

.dimension-inputs-container .input-group input[type="number"] {
  flex-grow: 1;
  padding-right: 36px; /* Reduced space for unit */
  margin-bottom: 0;
}

.dimension-inputs-container .input-group .unit {
  position: absolute;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 0.85em; /* Increased */
  color: var(--text-color-muted);
  pointer-events: none;
}

/* File Selection Status */
/* Styling for the wrapper of file input button and status text */
.section > .field-wrapper:has(button.btn-primary + .file-select-status-span) {
  display: flex;
  align-items: center;
  gap: 8px; /* Reduced gap */
}

.file-select-status-span {
  font-style: normal;
  color: var(--text-color-muted);
  font-size: 0.85em; /* Increased */
  /* margin-left is now handled by gap in the parent .field-wrapper */
  transition: color 0.3s ease;
  line-height: normal; /* Use normal line-height for better default vertical alignment with button in flex container */
  flex-shrink: 1; /* Allow span to shrink if needed */
  overflow: hidden; /* Prevent long text from breaking layout before ellipsis */
  white-space: nowrap; /* Keep text on one line for ellipsis */
  text-overflow: ellipsis; /* Show ellipsis for overflow */
}

.file-select-status-span.file-selected-badge {
  /* Original light mode badge style */
  background-color: #f1f3f5;
  color: #495057; /* Original text color for badge */
  padding: 6px 10px; /* Reduced */
  border-radius: 6px; /* Original border-radius */
  border: 1px solid #dee2e6; /* Original border */
  font-weight: normal; /* Original font-weight */
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis; /* This is now on the base .file-select-status-span */
  vertical-align: middle;
  display: inline-block;
  padding: 5px 8px; /* Reduced */
  /* white-space and overflow are now on the base class */
}

body.dark-mode .file-select-status-span.file-selected-badge {
  /* Original dark mode badge style */
  background-color: #343a40;
  border-color: #495057;
  color: #ced4da;
}

/* Main Action Buttons (Process/Generate) */
#processBtn,
#generateSheinLabelBtn {
  display: block;
  padding: 10px 18px; /* Reduced */
  font-size: 0.95em; /* Increased */
  font-weight: 600; /* Less heavy */
  text-transform: none; /* No uppercase for modern简约 */
  letter-spacing: 0.3px; /* Less spacing */
}

/* Result Area */
#result, #sheinResult {
  margin-top: 20px; /* Reduced */
  padding: 14px 18px; /* Reduced */
  border-radius: var(--border-radius-md);
  font-size: 0.9em; /* Increased */
  line-height: 1.7;
  border-width: 1px;
  box-shadow: var(--shadow-sm);
}

#result p, #sheinResult p { margin: 0; } /* Already global reset */
#result p + p, #sheinResult p + p { margin-top: 8px; } /* Space between paragraphs in result */

#result.success, #sheinResult.success {
  /* Original success style */
  background-color: #d1e7dd;
  border-color: #a3cfbb;
  color: #0a3622;
}
body.dark-mode #result.success, body.dark-mode #sheinResult.success {
  /* Original dark mode success style */
  background-color: #1c3a27;
  border-color: #2c5c3c;
  color: #a6d1a4;
}

#result.error, #sheinResult.error {
  /* Original error style */
  background-color: #f8d7da;
  border-color: #f1aeB5;
  color: #58151c;
}
body.dark-mode #result.error, body.dark-mode #sheinResult.error {
  /* Original dark mode error style */
  background-color: #4a1c20;
  border-color: #7c2c32;
  color: #f4a9a8;
}

/* Post Process Action Buttons Container */
#pdfResizePostProcessActions,
#sheinPostProcessActions {
  margin-top: 16px; /* Reduced */
  display: none; /* JS controls visibility */
  gap: 8px; /* Reduced spacing between buttons */
  flex-wrap: wrap; /* Allow buttons to wrap on smaller screens if needed */
}
/* Ensure buttons inside these containers are displayed correctly */
#pdfResizePostProcessActions button,
#sheinPostProcessActions button {
  flex-grow: 1;
  background-color: var(--button-secondary-bg);
  color: var(--button-secondary-text);
  border: 1px solid var(--button-secondary-border);
  font-weight: 500; /* Ensure consistent weight with action-button */
}

#pdfResizePostProcessActions button:hover,
#sheinPostProcessActions button:hover {
  background-color: var(--button-secondary-hover-bg);
  border-color: color-mix(in srgb, var(--button-secondary-border) 80%, var(--text-color)); /* Match .action-button hover */
  /* General button hover transform and shadow will still apply */
}


/* Theme Toggle Button */
#themeToggleBtn {
  background-color: transparent;
  color: var(--text-color-muted); /* Icon color will inherit this */
  border: 1px solid transparent;
  padding: 0;
  border-radius: 50%;
  /* font-size is not needed as SVG has its own size */
  width: 36px; /* Reduced */
  height: 36px; /* Reduced */
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: none;

  margin-top: auto;
  align-self: center;
  margin-bottom: 8px; /* Reduced */
  transition: background-color 0.3s cubic-bezier(0.25, 0.1, 0.25, 1), color 0.3s cubic-bezier(0.25, 0.1, 0.25, 1), border-color 0.3s cubic-bezier(0.25, 0.1, 0.25, 1), transform 0.2s cubic-bezier(0.25, 0.1, 0.25, 1);
}

/* Removed #themeToggleBtn svg.heroicon styles */

#themeToggleBtn:hover {
  background-color: var(--nav-link-hover-bg);
  border-color: var(--border-color-soft);
  transform: scale(1.05); /* Apple-like hover for theme toggle */
  box-shadow: none;
}

/* Removed #themeToggleBtn:hover svg.heroicon styles */

/* Ensure the general #themeToggleBtn:hover styles are appropriate for text/emoji content */
/* The existing #themeToggleBtn:hover rule should be fine:
#themeToggleBtn:hover {
  background-color: var(--nav-link-hover-bg);
  border-color: var(--border-color-soft);
  transform: translateY(0);
  box-shadow: none;
}
*/
/* Also ensure #themeToggleBtn itself has appropriate font-size if it was removed previously */
/* Re-checking #themeToggleBtn base styles from earlier state:
#themeToggleBtn {
  background-color: transparent;
  color: var(--text-color-muted);
  border: 1px solid transparent;
  padding: 0;
  border-radius: 50%;
  font-size: 1.6em; // This was for icon, might need adjustment for emoji if too big
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: none;
  margin-top: auto;
  align-self: center;
  margin-bottom: 10px;
  transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease;
}
The font-size: 1.6em on #themeToggleBtn might make emojis large.
Let's ensure it's reasonable or revert to a previous state if necessary.
The original #themeToggleBtn (before any icon library) had:
  font-size: 1.5em;
  width: 40px;
  height: 40px;
This should be fine for emojis.
*/

/* Custom Scrollbar Styles */
.sidebar::-webkit-scrollbar,
.main-content::-webkit-scrollbar, /* Apply to main-content as well */
.view-container::-webkit-scrollbar { /* If view-container is the one scrolling */
  width: 6px; /* Reduced */
}

.sidebar::-webkit-scrollbar-track,
.main-content::-webkit-scrollbar-track,
.view-container::-webkit-scrollbar-track {
  background: transparent;
}

.sidebar::-webkit-scrollbar-thumb,
.main-content::-webkit-scrollbar-thumb,
.view-container::-webkit-scrollbar-thumb {
  background-color: var(--border-color-soft); /* Original scrollbar thumb color */
  border-radius: 10px;
  border: 2px solid transparent; /* Creates padding effect */
  border: 1px solid #ced4da; /* Standard border color */
  border-radius: 8px; /* More rounded inputs */
  box-sizing: border-box;
  font-size: 0.9em; /* Increased */
  background-color: #ffffff;
  color: #495057;
  transition: border-color 0.2s ease, box-shadow 0.2s ease, background-color 0.4s ease, color 0.4s ease;
  width: 100%; /* Make inputs and selects take full width of their parent */
}

body.dark-mode input[type="text"],
body.dark-mode input[type="number"],
body.dark-mode input[type="color"],
body.dark-mode select {
  background-color: #252525; /* Slightly darker input background for dark mode */
  color: #e0e0e0;
  border-color: #555; /* Darker border */
}

input[type="text"]:focus,
input[type="number"]:focus,
input[type="color"]:focus,
select:focus {
  border-color: #007bff;
  box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.2); /* Softer focus shadow */
  outline: none;
}

body.dark-mode input[type="text"]:focus,
body.dark-mode input[type="number"]:focus,
body.dark-mode input[type="color"]:focus,
body.dark-mode select:focus {
  border-color: #0088ff;
  box-shadow: 0 0 0 0.2rem rgba(0, 136, 255, 0.25);
}

.dimension-inputs-container { /* Replaced #customSize with a class */
  margin-top: 8px; /* Reduced */
  display: flex;
  gap: 10px; /* Reduced */
  align-items: flex-start; /* Align items to the start for better error message placement below inputs */
  flex-wrap: nowrap;
}

/* This rule might be too broad or conflict if inputs are direct children, review if needed */
/* .dimension-inputs-container input[type="number"] { */
  /* flex-grow: 1; */ /* This should be on the input within .input-group */
  /* width: auto; */
/* } */

/* Input group for custom dimensions with units */
.dimension-inputs-container .input-group { /* Replaced #customSize with a class */
  position: relative; /* For absolute positioning of the unit */
  display: flex;
  align-items: center; /* Align input and unit vertically if needed */
  flex: 1; /* Allow each input group to grow and shrink equally */
  /* margin-bottom: 10px; */ /* Remove bottom margin if they are on the same line */
}

.dimension-inputs-container .input-group input[type="number"] { /* Replaced #customSize with a class */
  flex-grow: 1;
  padding-right: 34px; /* Reduced space for unit */
  margin-bottom: 0;
  box-sizing: border-box;
}

.dimension-inputs-container .input-group .unit { /* Replaced #customSize with a class */
  position: absolute;
  right: 12px; /* Adjusted position */
  top: 50%;
  transform: translateY(-50%);
  font-size: 0.8em; /* Increased */
  color: var(--text-color-muted);
  pointer-events: none;
}

body.dark-mode .dimension-inputs-container .input-group .unit { /* Replaced #customSize with a class */
  color: var(--dm-text-color-muted, #aaa); /* Dark mode unit color */
}

.dimension-inputs-container .field-wrapper {
  display: flex;
  flex-direction: column; /* Stack input-group and error message vertically */
  flex: 1; /* Allow each field (e.g., width, height) to take equal space if .dimension-inputs-container is a row */
  /* Add a small gap if multiple error messages could appear or for general structure, if needed */
  /* gap: 2px; */ /* Example: if error messages had variable height and you wanted consistent spacing */
}


/* Old Theme Toggle Button styles removed as it's now a positioned icon */

/* Process Button */
#processBtn {
  display: block;
  /* background-color, color, font-weight, text-transform, letter-spacing are now handled by .btn-primary or general button style */
  /* Retain specific font-weight or text-transform if desired, or let .btn-primary define it */
  font-weight: 700; /* Keep if specifically bolder than other .btn-primary */
  text-transform: uppercase; /* Keep if specifically uppercase */
  letter-spacing: 1px; /* Keep if specific spacing is desired */
}
/* #processBtn:hover - handled by .btn-primary:hover */
/* body.dark-mode #processBtn - handled by .btn-primary */
/* body.dark-mode #processBtn:hover - handled by .btn-primary:hover */

#generateSheinLabelBtn {
  display: block;
  /* Inherits .btn-primary styles for color, padding, etc. */
  font-weight: 700; /* Match #processBtn */
  text-transform: uppercase; /* Match #processBtn */
  letter-spacing: 1px; /* Match #processBtn */
}

/* Result Area */
#result, #sheinResult { /* Apply common result styling to sheinResult too */
  display: none; /* Hide by default */
  margin-top: 24px; /* Reduced */
  padding: 15px 18px; /* Reduced */
  border-radius: 8px;
  font-size: 0.9em; /* Increased */
  transition: background-color 0.4s ease, border-color 0.4s ease, color 0.4s ease, box-shadow 0.4s ease;
  line-height: 1.7; /* Better readability for results */
  box-shadow: 0 4px 8px rgba(0,0,0,0.04);
}

#result p, #sheinResult p {
  margin: 0;
}

#result.success, #sheinResult.success {
  background-color: #d1e7dd; /* Softer green */
  border: 1px solid #a3cfbb; /* Matching border */
  color: #0a3622; /* Darker green text */
}
body.dark-mode #result.success, body.dark-mode #sheinResult.success {
  background-color: #1c3a27; /* Dark green background */
  border-color: #2c5c3c; /* Matching dark border */
  color: #a6d1a4; /* Light green text */
}

#result.error, #sheinResult.error {
  background-color: #f8d7da; /* Softer red */
  border: 1px solid #f1aeB5; /* Matching border */
  color: #58151c; /* Darker red text */
}
body.dark-mode #result.error, body.dark-mode #sheinResult.error {
  background-color: #4a1c20; /* Dark red background */
  border-color: #7c2c32; /* Matching dark border */
  color: #f4a9a8; /* Light red text */
}

/* New Theme Toggle Button - Positioned Icon Button */
#themeToggleBtn {
  /* position: fixed; Removed */
  /* top: 25px; Removed */
  /* right: 25px; Removed */
  background-color: transparent;
  color: var(--text-color); /* Use text color for the icon */
  border: 1px solid transparent; /* Transparent border initially */
  padding: 0; /* Remove padding if using explicit width/height for centering */
  border-radius: 50%; /* Make it circular */
  cursor: pointer;
  font-size: 1.4em; /* Increased */
  line-height: 1; /* Ensure icon is centered in the button */
  /* z-index: 1000; Removed, may not be needed or adjust if necessary */
  width: 40px; /* Reduced */
  height: 40px; /* Reduced */
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background-color 0.3s cubic-bezier(0.25, 0.1, 0.25, 1), color 0.3s cubic-bezier(0.25, 0.1, 0.25, 1), border-color 0.3s cubic-bezier(0.25, 0.1, 0.25, 1), transform 0.2s cubic-bezier(0.25, 0.1, 0.25, 1);
  /* Override generic button styles if any still apply through specificity */
  font-weight: normal; /* Reset font-weight if inherited from generic button */
  letter-spacing: normal; /* Reset letter-spacing */
  text-transform: none; /* Reset text-transform */
  box-shadow: none; /* Remove generic button shadow */

  /* New styles for positioning within sidebar */
  margin-top: auto; /* Push to the bottom of the flex container (.sidebar) */
  align-self: center; /* Center horizontally within the sidebar */
  margin-bottom: 8px; /* Reduced space from the bottom of the sidebar */
}

/* New Theme Toggle Switch Styles */
.theme-switch-wrapper {
  display: flex;
  align-items: center;
  cursor: pointer;
  margin-top: auto; /* Push to the bottom */
  align-self: center; /* Center horizontally */
  margin-bottom: 12px; /* Space from bottom */
  border-radius: 20px; /* Rounded wrapper */
  background-color: var(--input-bg); /* Use input background for contrast */
  border: 1px solid var(--border-color-soft);
  box-shadow: var(--shadow-sm);
  transition: background-color 0.3s ease, border-color 0.3s ease;
}

.theme-switch-track {
  width: 56px; /* Width of the track */
  height: 28px; /* Height of the track */
  background-color: var(--border-color-soft); /* Light grey track */
  border-radius: 14px; /* Fully rounded track */
  position: relative;
  transition: background-color 0.3s ease;
  display: flex; /* To align thumb */
  align-items: center; /* Vertically center thumb */
}

.theme-switch-thumb {
  width: 24px; /* Diameter of the thumb */
  height: 24px; /* Diameter of the thumb */
  background-color: #ffffff; /* White thumb */
  border-radius: 50%; /* Circular thumb */
  position: absolute;
  left: 2px; /* Initial position (for light mode) */
  transition: transform 0.3s cubic-bezier(0.25, 0.1, 0.25, 1), background-color 0.3s ease;
  box-shadow: 0 1px 3px rgba(0,0,0,0.2);
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden; /* Hide the icon that's not active */
}


.theme-switch-thumb .sun-icon,
.theme-switch-thumb .moon-icon {
  position: absolute; /* Position icons on top of each other */
  font-size: 16px; /* Adjust Emoji size */
  line-height: 1; /* Ensure proper vertical alignment */
  transition: opacity 0.2s ease-in-out, transform 0.2s ease-in-out;
  /* Color will be inherited or can be set specifically if needed */
}

.sun-icon {
  opacity: 1; /* Visible in light mode */
  transform: scale(1) rotate(0deg);
  color: #f39c12; /* Sunny yellow */
}

.moon-icon {
  opacity: 0; /* Hidden in light mode */
  transform: scale(0.8) rotate(-15deg);
  color: #f1c40f; /* Moon yellow, slightly different for active state */
}
/* Active state (Dark Mode) */
.theme-switch-wrapper.active .theme-switch-track {
  background-color: var(--button-secondary-bg); /* Dark mode: Even darker grey for track, was --nav-link-hover-bg */
}

.theme-switch-wrapper.active .theme-switch-thumb {
  transform: translateX(28px); /* Move thumb to the right (56px track width - 24px thumb width - 2px left offset - 2px right offset) */
  background-color: var(--nav-link-hover-bg); /* Dark mode: Dark grey for thumb, was --input-bg. Moon icon is white. */
}

.theme-switch-wrapper.active .sun-icon {
  opacity: 0;
  transform: scale(0.8) rotate(15deg);
}

.theme-switch-wrapper.active .moon-icon {
  opacity: 1;
  transform: scale(1) rotate(0deg);
  color: var(--text-on-primary-color); /* White moon on dark active thumb */
}

/* Dark mode specific adjustments for the wrapper itself if needed */
body.dark-mode .theme-switch-wrapper {
  background-color: var(--input-bg); /* Ensure it uses dark mode input bg */
  border-color: var(--border-color-soft);
}

body.dark-mode .theme-switch-thumb {
   /* Thumb is white by default, if active it uses primary-color-hover */
}

/* Explicit dark mode overrides for active switch to ensure grey tones */
body.dark-mode .theme-switch-wrapper.active .theme-switch-track {
  background-color: var(--button-secondary-bg); /* Consistent darker grey for track in dark mode */
}

body.dark-mode .theme-switch-wrapper.active .theme-switch-thumb {
  background-color: var(--nav-link-hover-bg); /* Consistent dark grey for thumb in dark mode */
}

body.dark-mode .sun-icon {
  /* color: #f39c12; /* Sun color remains same even in dark mode if it's the 'off' state */
}

body.dark-mode .theme-switch-wrapper.active .moon-icon {
   /* color is already var(--text-on-primary-color) which is good for dark active thumb */
}

/* Custom Scrollbar Styles */
/* For WebKit browsers (Chrome, Safari, Edge) */
.sidebar::-webkit-scrollbar,
.view-container::-webkit-scrollbar {
  width: 6px; /* Reduced */
}

.sidebar::-webkit-scrollbar-track,
.view-container::-webkit-scrollbar-track {
  background: transparent; /* Make track invisible */
  border-radius: 4px;
}

.sidebar::-webkit-scrollbar-thumb,
.view-container::-webkit-scrollbar-thumb {
  background-color: var(--border-color-soft, #cccccc); /* Scrollbar thumb color */
  border-radius: 4px;
  border: 2px solid transparent; /* Creates padding around thumb, making it effectively thinner */
  background-clip: content-box;
}

.sidebar::-webkit-scrollbar-thumb:hover,
.view-container::-webkit-scrollbar-thumb:hover {
  background-color: var(--primary-color, #007bff); /* Thumb color on hover */
}

body.dark-mode .sidebar::-webkit-scrollbar-thumb,
body.dark-mode .view-container::-webkit-scrollbar-thumb {
  background-color: var(--border-color-soft); /* Use reverted dark mode soft border */
}

body.dark-mode .sidebar::-webkit-scrollbar-thumb:hover,
body.dark-mode .view-container::-webkit-scrollbar-thumb:hover {
  background-color: var(--primary-color); /* Use reverted dark mode primary color */
}

/* For Firefox */
.sidebar,
.view-container {
  scrollbar-width: thin; /* "auto" or "thin" */
  scrollbar-color: var(--border-color-soft, #cccccc) transparent; /* thumb color track color */
}

body.dark-mode .sidebar,
body.dark-mode .view-container {
  scrollbar-color: var(--border-color-soft) transparent; /* Use reverted dark mode soft border */
}

/* Styles for dynamically generated result entries */
.result-entry {
  padding: 12px;
  border: 1px solid var(--border-color-soft);
  border-radius: var(--border-radius-md);
  margin-bottom: 10px; /* Space between entries */
  background-color: var(--container-bg-color-original);
  box-shadow: var(--shadow-sm);
  transition: background-color 0.3s ease, border-color 0.3s ease; /* Added transition */
}

.result-entry:last-child {
  margin-bottom: 0;
}

.result-entry p {
  margin-bottom: 6px;
  line-height: 1.5;
  word-break: break-all; /* Ensure long paths or messages wrap */
}
.result-entry p:last-of-type { /* Usually the paragraph before buttons or last info */
  margin-bottom: 8px;
}

.result-entry .action-buttons-container {
  margin-top: 10px;
  display: flex;
  flex-wrap: wrap; /* Allow buttons to wrap on small screens */
  gap: 8px; /* Spacing between buttons */
}

/* Individual action buttons within the entry already styled by .action-button */

.result-entry.success-entry {
  border-left: 4px solid var(--success-color, #28a745);
}
body.dark-mode .result-entry.success-entry {
    border-left-color: var(--success-color); /* Ensure dark mode success color is used */
}

.result-entry.error-entry {
  border-left: 4px solid var(--error-border-color, #dc3545);
}
body.dark-mode .result-entry.error-entry {
    border-left-color: var(--error-border-color); /* Ensure dark mode error color is used */
}

/* Text color within entries should generally be var(--text-color) */
/* Specific error text color for error messages within an error entry */
.result-entry.error-entry p.error-message-text { /* Add a specific class if needed for the error text itself */
    color: var(--error-text-color);
}
/* The general paragraph color var(--text-color) should be fine for success entries */
/* and for non-error-message paragraphs in error entries. */
/* Toast Notification Styles */
.toast-container {
  position: fixed;
  bottom: 16px; /* Reduced */
  right: 16px; /* Reduced */
  z-index: 1000; /* Ensure toasts are on top */
  display: flex;
  flex-direction: column-reverse; /* New toasts appear on top if stacked from bottom */
  gap: 8px; /* Reduced */
}

.toast {
  padding: 10px 16px; /* Reduced */
  border-radius: var(--border-radius-medium, 6px);
  color: var(--text-color-light, #fff); /* Default to light text, adjust per type */
  font-size: 0.85em; /* Increased */
  box-shadow: var(--shadow-md); /* Use consistent shadow from theme */
  opacity: 0; /* Start hidden, animation will make it visible */
  transform: translateY(15px); /* Start slightly lower for slide-in effect */
  animation: toast-slide-in 0.5s cubic-bezier(0.23, 1, 0.32, 1) forwards; /* Apple-like toast animation */
  min-width: 220px; /* Reduced */
  max-width: 320px; /* Reduced */
  word-wrap: break-word;
}

@keyframes toast-slide-in {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Add a class for fade-out, to be triggered by JS before removal */
.toast.fade-out {
  animation: toast-fade-out 0.5s cubic-bezier(0.755, 0.05, 0.855, 0.06) forwards; /* Apple-like toast fade out */
  /* Ensure it stays faded out if JS removal is delayed */
  opacity: 0;
  transform: translateY(15px); /* Match final state of fade-out animation */
}

@keyframes toast-fade-out {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
    transform: translateY(10px); /* Optional: slight move on fade out */
  }
}

.toast-success {
  background-color: var(--success-color, #28a745);
  color: var(--text-color-light, #fff);
}

.toast-error {
  background-color: var(--error-border-color, #dc3545); /* Using existing error border color for bg */
  color: var(--text-color-light, #fff);
}

.toast-info {
  background-color: var(--info-color, #17a2b8);
  color: var(--text-color-light, #fff);
}

.toast-warning {
  background-color: var(--warning-color, #ffc107);
  color: var(--text-color-dark, #212529); /* Warnings often have dark text on light bg */
}

/* Ensure CSS variables for toast colors are defined if not already */
/* These are examples, adjust to your theme's palette */
:root {
  --success-color: #28a745;
  --info-color: #17a2b8;
  --warning-color: #ffc107;
  /* --error-border-color is already defined */
  /* --text-color-light and --text-color-dark should ideally come from your theme variables */
}

body.dark-mode {
  /* Adjust toast type background/text colors for dark mode if needed */
  /* For example, if default success/info/error are too bright/dark */
  --success-color: #388e3c; /* Darker green for dark mode */
  --info-color: #0277bd;   /* Darker blue for dark mode */
  /* --error-border-color is already adapted for dark mode */
  --warning-color: #f57f17; /* Darker yellow/orange for dark mode */
  /* --text-color-light and --text-color-dark should be respected by default toast text colors */
}

/* Custom Select Dropdown Styles */
.custom-select-wrapper {
  position: relative;
  width: 100%; /* Or match the width of other inputs */
  margin-bottom: 8px; /* Consistent with other inputs */
}

.custom-select-container {
  position: relative;
  background-color: var(--input-bg);
  border: 1px solid var(--border-color-soft);
  border-radius: var(--border-radius-sm);
  color: var(--text-color);
  font-size: 0.9em;
  cursor: pointer;
  transition: border-color 0.2s ease, box-shadow 0.2s ease;
  width: 100%;
}

.custom-select-trigger {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 6px 10px; /* Match input padding */
  height: calc(1.6em + 12px + 2px); /* Approximate height of a standard input with padding and border */
  line-height: 1.6; /* Match body line-height for consistency */
}

.custom-select-trigger span {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  flex-grow: 1;
}

.custom-select-trigger .arrow {
  width: 0;
  height: 0;
  border-left: 5px solid transparent;
  border-right: 5px solid transparent;
  border-top: 5px solid var(--text-color-muted);
  transition: transform 0.2s ease;
  margin-left: 8px;
}

.custom-select-container.open .custom-select-trigger .arrow {
  transform: rotate(180deg);
}

.custom-select-options {
  display: none;
  position: absolute;
  top: 100%; /* Position below the trigger */
  left: 0;
  right: 0;
  background-color: var(--input-bg);
  border: 1px solid var(--border-color-strong); /* Slightly stronger border for dropdown */
  border-top: none; /* Avoid double border with trigger */
  border-radius: 0 0 var(--border-radius-sm) var(--border-radius-sm);
  z-index: 10; /* Ensure it's above other elements */
  max-height: 200px; /* Limit height and allow scrolling */
  overflow-y: auto;
  box-shadow: var(--shadow-md);
}

.custom-select-option {
  padding: 8px 10px; /* Slightly more padding for options */
  transition: background-color 0.2s ease, color 0.2s ease;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.custom-select-option:hover {
  background-color: var(--nav-link-hover-bg); /* Use nav link hover for consistency */
  color: var(--nav-link-hover-color);
}

.custom-select-option.selected {
  background-color: var(--primary-color);
  color: var(--text-on-primary-color);
  font-weight: 500;
}

/* Focus state for the container (when trigger is clicked) */
.custom-select-container.open,
.custom-select-container:focus-within { /* For keyboard navigation if implemented */
  border-color: var(--primary-color);
  box-shadow: 0 0 0 2px var(--input-focus-ring);
  outline: none;
}

/* Scrollbar for custom select options (if needed) */
.custom-select-options::-webkit-scrollbar {
  width: 6px;
}
.custom-select-options::-webkit-scrollbar-track {
  background: transparent;
}
.custom-select-options::-webkit-scrollbar-thumb {
  background-color: var(--border-color-soft);
  border-radius: 3px;
}
.custom-select-options { /* Firefox scrollbar */
  scrollbar-width: thin;
  scrollbar-color: var(--border-color-soft) transparent;
}
body.dark-mode .custom-select-options::-webkit-scrollbar-thumb {
   background-color: var(--border-color-strong); /* Dark mode scrollbar thumb */
}
body.dark-mode .custom-select-options { /* Firefox scrollbar dark mode */
  scrollbar-color: var(--border-color-strong) transparent;
}

/* Custom Title Bar Styles */
.title-bar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  height: 32px; /* Standard title bar height */
  background-color: var(--container-bg-color-original); /* Use a theme variable for background */
  color: var(--text-color);
  padding: 0 8px; /* Padding on the sides */
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 10000; /* High z-index to stay on top */
  border-bottom: 1px solid var(--border-color-soft);
  user-select: none;
}

.title-bar-drag-region {
  flex-grow: 1;
  height: 100%;
  -webkit-app-region: drag; /* Makes the region draggable */
  /* This div is purely for dragging, ensure it doesn't visually obstruct */
}

.title-bar-text {
  position: absolute; /* Position absolutely to center it regardless of controls */
  left: 50%;
  transform: translateX(-50%);
  font-weight: 600;
  font-size: 0.9em;
  -webkit-app-region: drag; /* Allow dragging on text too */
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: calc(100% - 160px); /* Max width to prevent overlap with controls */
}

.title-bar-controls {
  display: flex;
  align-items: center;
  -webkit-app-region: no-drag; /* Buttons are not draggable */
  position: relative; /* Keep controls normally flowed to the right */
  z-index: 1; /* Ensure controls are above drag region if overlapping */
}

.title-bar-button {
  background: none;
  border: none;
  padding: 0;
  width: 40px;
  height: 32px; /* Match title bar height */
  margin-left: 0px; /* No margin, rely on padding of parent or button itself */
  cursor: pointer;
  outline: none;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-color);
  -webkit-app-region: no-drag;
  transition: background-color 0.15s ease-in-out, color 0.15s ease-in-out;
}

.title-bar-button svg {
  fill: currentColor;
  width: 10px;
  height: 10px;
}

.title-bar-button:hover {
  background-color: var(--nav-link-hover-bg);
}

.title-bar-button:active {
  background-color: color-mix(in srgb, var(--nav-link-hover-bg) 85%, var(--text-color) 15%); /* Darken hover for active */
}

#close-btn:hover {
  background-color: #e81123;
  color: white;
}
#close-btn:active {
  background-color: #c40a1c;
  color: white;
}

/* Dark mode for title bar buttons (if specific overrides needed beyond CSS variables) */
body.dark-mode .title-bar-button:hover {
    background-color: var(--nav-link-hover-bg); /* Ensure dark mode variable is used */
}

body.dark-mode .title-bar-button:active {
    background-color: color-mix(in srgb, var(--nav-link-hover-bg) 85%, var(--text-color) 15%);
}

body.dark-mode #close-btn:hover {
  background-color: #e81123;
  color: white;
}
body.dark-mode #close-btn:active {
  background-color: #c40a1c;
  color: white;
}

/* Adjust body and app-layout for frameless window */
body {
  padding: 0; /* Remove body padding */
  /* height: 100vh; /* Body takes full viewport height */
  /* overflow: hidden; /* Prevent body scrollbars */
}

.app-layout {
  padding-top: 32px; /* Match title bar height, push content down */
  height: 100vh; /* app-layout itself takes full viewport height */
  /* Existing overflow: hidden on .app-layout is good */
  /* Existing border-radius, border, box-shadow on .app-layout are fine */
}

/* Sidebar and main-content height adjustment if they were previously based on a padded body */
/* If .sidebar and .main-content are direct children of .app-layout and use flex properties
   to fill its height, they should adjust automatically.
   Their current height: calc(100vh - 48px) might need to be changed to just 100%
   if .app-layout is now the full 100vh (minus its own padding-top).
   Let's assume they are flex children and will adapt.
   If not, they might need: height: calc(100% - 32px); if .app-layout is 100vh.
   Or more simply, if .app-layout is display:flex and they are flex-children,
   they should fill the space correctly.
   Current .sidebar and .main-content have overflow-y: auto, which is good.
   .app-layout has height: calc(100vh - 48px) and padding-top: 32px.
   The `height: calc(100vh - 48px)` on `.app-layout` was based on the old `body { padding: 20px; }`
   (20px top + 20px bottom + 8px for something else? or 24px top/bottom).
   Now that body has `padding: 0`, `.app-layout` should be `height: 100vh;` and its `padding-top: 32px;`
   will correctly position its content below the title bar.
*/
