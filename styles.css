/* Global Resets and Modern Base Styles */
*,
*::before,
*::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html {
  font-size: 16px; /* Base for rem units if desired */
  height: 100%;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

body {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
  line-height: 1.7; /* Increased for better readability */
  background-color: var(--page-bg);
  color: var(--text-color);
  padding: 24px; /* Slightly increased padding around the app */
  transition: background-color 0.3s ease, color 0.3s ease;
  min-height: 100vh;
  overflow-x: hidden; /* Prevent horizontal scroll on body */
}

/* CSS Variables - New Theme */
:root {
  /* Original color variables from before "flashy" theme */
  --app-bg: #f4f6f8; /* Slightly softer app background */
  --sidebar-bg-color: #ffffff;
  --main-content-bg-color: #f4f6f8;
  --container-bg-color-original: #ffffff; /* For inner content boxes, like sections */
  
  --primary-color: #0077cc; /* Slightly adjusted primary blue */
  --primary-color-hover: #0066bb;
  --primary-color-active: #0055aa;

  --text-color: #333333; /* Darker, more modern text */
  --text-color-muted: #767676; /* Softer muted text */
  --text-on-primary-color: #ffffff;

  --border-color-soft: #e0e0e0; /* Softer border */
  --border-color-strong: #cccccc; /* Softer strong border */
  
  --input-bg: #ffffff;
  --input-focus-ring: rgba(0, 119, 204, 0.2); /* Adjusted focus ring */

  /* Variables for nav links */
  --nav-link-color: #555555;
  --nav-link-hover-bg: #f0f0f0;
  --nav-link-hover-color: var(--primary-color-hover);
  --nav-link-active-text: #ffffff;

  /* Secondary button colors */
  --button-secondary-bg: #e9ecef;
  --button-secondary-text: #333333;
  --button-secondary-hover-bg: #dce0e3;
  --button-secondary-border: #ced4da;
  
  /* Shadow and border-radius variables */
  --shadow-sm: 0 1px 3px 0 rgba(0, 0, 0, 0.05); /* Softer shadows */
  --shadow-md: 0 3px 6px -1px rgba(0, 0, 0, 0.07), 0 2px 4px -1px rgba(0, 0, 0, 0.04);
  --shadow-lg: 0 8px 16px -3px rgba(0, 0, 0, 0.08), 0 4px 6px -2px rgba(0, 0, 0, 0.05);

  --border-radius-sm: 4px;  /* Slightly smaller for a sharper look */
  --border-radius-md: 6px;
  --border-radius-lg: 10px;
  --border-radius-xl: 12px;

  /* Page background variable */
  --page-bg: #f8f9fa; /* Kept light for overall page */

  /* Error Colors */
  --error-text-color: #c0392b; /* More modern red */
  --error-border-color: #e74c3c;
  --error-focus-ring: rgba(231, 76, 60, 0.25);
}

body.dark-mode {
  /* Original dark mode color variables */
  --app-bg: #1a1a1a; /* Darker app background */
  --sidebar-bg-color: #232323;
  --main-content-bg-color: #1a1a1a;
  --container-bg-color-original: #232323;

  --primary-color: #0088dd; /* Brighter blue for dark mode */
  --primary-color-hover: #0077cc;
  --primary-color-active: #0066bb;
  
  --text-color: #e6e6e6; /* Lighter text */
  --text-color-muted: #999999;
  /* --text-on-primary-color: #ffffff; remains same */

  --border-color-soft: #3a3a3a;
  --border-color-strong: #555555;

  --input-bg: #2c2c2c;
  --input-focus-ring: rgba(0, 136, 221, 0.3);

  /* Variables for nav links */
  --nav-link-color: #bbbbbb;
  --nav-link-hover-bg: #333333;
  --nav-link-hover-color: var(--primary-color-hover);
  /* --nav-link-active-text: #ffffff; remains same */

  /* Secondary button colors for dark mode */
  --button-secondary-bg: #333333;
  --button-secondary-text: #e6e6e6;
  --button-secondary-hover-bg: #404040;
  --button-secondary-border: #555555;

  /* Shadow and border-radius variables */
  /* Using the same softer shadows, but they will appear different on dark bg */
  --shadow-sm: 0 1px 3px 0 rgba(0, 0, 0, 0.15); /* Slightly more pronounced for dark */
  --shadow-md: 0 3px 6px -1px rgba(0, 0, 0, 0.18), 0 2px 4px -1px rgba(0, 0, 0, 0.12);
  --shadow-lg: 0 8px 16px -3px rgba(0, 0, 0, 0.20), 0 4px 6px -2px rgba(0, 0, 0, 0.15);
  
  /* Page background variable */
  --page-bg: #121212; /* Kept very dark for overall page */

  /* Error Colors for Dark Mode */
  --error-text-color: #ff7675; /* Brighter, more accessible red text */
  --error-border-color: #d63031;
  --error-focus-ring: rgba(214, 48, 49, 0.35);
}

/* App Layout */
.app-layout {
  display: flex;
  height: calc(100vh - 48px); /* Adjusted for new body padding */
  background-color: var(--app-bg);
  border-radius: var(--border-radius-xl);
  border: 1px solid var(--border-color-soft); /* Softer border for app layout */
  box-shadow: var(--shadow-lg);
  overflow: hidden;
}

.sidebar {
  width: 240px;
  flex-shrink: 0;
  background-color: var(--sidebar-bg-color);
  padding: 24px 20px; /* Slightly more vertical padding for sidebar content */
  border-right: 1px solid var(--border-color-soft);
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  transition: background-color 0.3s ease, border-color 0.3s ease;
}

.sidebar-header {
  margin-bottom: 25px;
  padding-bottom: 12px; /* Reduced padding */
  border-bottom: 1px solid var(--border-color-soft); /* Softer border */
}

.sidebar-header h2 {
  margin: 0;
  font-size: 1.3em;
  font-weight: 600;
  color: var(--text-color);
  /* display: flex; and align-items: center; no longer needed for emoji */
}

/* Removed .sidebar-header h2 svg.heroicon styles */

.sidebar nav ul {
  list-style: none;
}

.sidebar nav li a.nav-link {
  display: block;
  padding: 10px 15px;
  text-decoration: none;
  color: var(--nav-link-color);
  border-radius: var(--border-radius-md);
  margin-bottom: 6px; /* Slightly reduced margin */
  font-weight: 500;
  transition: background-color 0.2s ease, color 0.2s ease, transform 0.1s ease;
}

.sidebar nav li a.nav-link:hover {
  background-color: var(--nav-link-hover-bg);
  color: var(--nav-link-hover-color);
  transform: translateX(2px); /* Slightly less transform */
}

.sidebar nav li a.nav-link.active {
  background-color: var(--primary-color);
  color: var(--nav-link-active-text);
  font-weight: 600;
  box-shadow: none; /* Removed shadow for a flatter active state */
}
.sidebar nav li a.nav-link.active:hover {
  background-color: var(--primary-color-hover);
  transform: translateX(0);
}


.main-content {
  flex-grow: 1;
  padding: 24px; /* Consistent padding */
  overflow-y: auto;
  background-color: var(--main-content-bg-color);
  display: flex;
  flex-direction: column;
}

.view-container {
  width: 100%;
  flex-grow: 1; /* Make view-container fill .main-content */
  display: flex;
  flex-direction: column;
  /* Removed flex properties, let content flow naturally */
}

.container { /* Inner content wrapper for each view */
  width: 100%;
  padding: 0; /* Padding will be on sections */
  background-color: transparent; /* No separate background for this container */
  flex-grow: 1; /* Allow container to fill .view-container */
  display: flex;
  flex-direction: column;
}

.container > h2 { /* View Titles */
  font-size: 1.7em;
  font-weight: 600;
  color: var(--text-color);
  margin-bottom: 24px;
  padding-bottom: 12px;
  border-bottom: 1px solid var(--border-color-soft);
  line-height: 1.3;
  /* display: flex; and align-items: center; no longer needed for emoji */
}

/* Removed .container > h2 svg.heroicon styles */

/* Sections within views */
.section {
  margin-bottom: 18px; /* Further reduced margin for compactness */
  padding: 18px;       /* Further reduced padding for compactness */
  background-color: var(--container-bg-color-original);
  border: 1px solid var(--border-color-soft); /* Softer border */
  border-radius: var(--border-radius-lg); /* Kept large radius for cards */
  box-shadow: var(--shadow-sm); /* Softer shadow for sections */
  transition: background-color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
}
.section:last-child {
  margin-bottom: 0;
}

/* Labels */
label {
  display: block;
  margin-bottom: 6px; /* Further reduced margin */
  font-weight: 500;
  color: var(--text-color-muted); /* Muted color for labels */
  font-size: 0.9em; /* Slightly smaller */
}

/* Buttons */
button, #themeToggleBtn { /* General button reset and base style */
  padding: 10px 20px; /* Slightly smaller padding */
  border: 1px solid transparent;
  border-radius: var(--border-radius-md);
  cursor: pointer;
  font-size: 0.95em;
  font-weight: 500; /* Less bold for general buttons */
  transition: all 0.2s ease-out;
  letter-spacing: 0.2px; /* Less spacing */
  text-align: center;
  box-shadow: none; /* Removed default shadow, add on hover */
}

button:hover, #themeToggleBtn:hover { /* themeToggleBtn hover is handled separately later */
  transform: translateY(-1px); /* Less movement */
  box-shadow: var(--shadow-sm); /* Add shadow on hover */
}

button:active, #themeToggleBtn:active { /* themeToggleBtn active is handled separately later */
  transform: translateY(0px);
  box-shadow: none; /* Remove shadow on active */
}

.btn-primary {
  /* Icon suggestion: Consider icons for common actions like "Select File", "Process" e.g. <svg>...</svg> Open File */
  background-color: var(--primary-color);
  color: var(--text-on-primary-color);
  border-color: var(--primary-color);
  min-width: 160px;
  font-weight: 600;
}
.btn-primary:hover {
  background-color: var(--primary-color-hover);
  border-color: var(--primary-color-hover);
}
.btn-primary:active {
  background-color: var(--primary-color-active);
  border-color: var(--primary-color-active);
}

.btn-primary.processing {
  /* The base background color is still var(--primary-color) from .btn-primary */
  background-image: linear-gradient(
    -45deg,
    rgba(255, 255, 255, 0.15) 25%,
    transparent 25%,
    transparent 50%,
    rgba(255, 255, 255, 0.15) 50%,
    rgba(255, 255, 255, 0.15) 75%,
    transparent 75%,
    transparent
  );
  background-size: 40px 40px; /* Size of the repeating stripes */
  animation: progress-bar-stripes 1s linear infinite;
}

@keyframes progress-bar-stripes {
  from {
    background-position: 40px 0;
  }
  to {
    background-position: 0 0;
  }
}

.action-button {
  background-color: var(--button-secondary-bg);
  color: var(--button-secondary-text);
  border: 1px solid var(--button-secondary-border); /* Ensure border is explicitly set */
  font-weight: 500;
}
.action-button:hover {
  background-color: var(--button-secondary-hover-bg);
  border-color: color-mix(in srgb, var(--button-secondary-border) 80%, var(--text-color));
}


/* Inputs and Selects */
input[type="text"],
input[type="number"],
select {
padding: 8px 12px; /* Slightly reduced padding for compactness */
margin-bottom: 10px; /* Reduced margin */
border: 1px solid var(--border-color-soft); /* Softer border for light mode */
border-radius: var(--border-radius-sm); /* Sharper corners */
box-sizing: border-box;
font-size: 0.95em; /* Consistent font size */
background-color: var(--input-bg);
color: var(--text-color);
transition: border-color 0.2s ease, box-shadow 0.2s ease;
width: 100%;
}

input[type="text"]:focus,
input[type="number"]:focus,
select:focus {
  border-color: var(--primary-color);
  box-shadow: 0 0 0 2px var(--input-focus-ring); /* Softer focus ring */
  outline: none;
}

/* Input Error Styling */
.input-error {
  border-color: var(--error-border-color) !important;
}

.input-error:focus {
  border-color: var(--error-border-color) !important; /* Keep border red on focus */
  box-shadow: 0 0 0 2px var(--error-focus-ring) !important; /* Softer red focus ring */
}

.error-message {
  display: none; /* Hidden by default, JS will override with display: block */
  width: 100%;
  margin-top: 5px; /* Space from the input above */
  font-size: 0.85em; /* Slightly larger error message */
  color: var(--error-text-color) !important;
}

.dimension-inputs-container {
  margin-top: 15px;
  display: flex;
  gap: 15px;
  align-items: center;
}

.dimension-inputs-container .input-group {
  position: relative;
  display: flex;
  flex: 1;
}

.dimension-inputs-container .input-group input[type="number"] {
  flex-grow: 1;
  padding-right: 40px; /* Space for unit */
  margin-bottom: 0;
}

.dimension-inputs-container .input-group .unit {
  position: absolute;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 0.9em;
  color: var(--text-color-muted);
  pointer-events: none;
}

/* File Selection Status */
/* Styling for the wrapper of file input button and status text */
.section > .field-wrapper:has(button.btn-primary + .file-select-status-span) {
  display: flex;
  align-items: center;
  gap: 10px; /* Slightly reduced gap */
}

.file-select-status-span {
  font-style: normal;
  color: var(--text-color-muted);
  font-size: 0.9em;
  /* margin-left is now handled by gap in the parent .field-wrapper */
  transition: color 0.3s ease;
  line-height: normal; /* Use normal line-height for better default vertical alignment with button in flex container */
  flex-shrink: 1; /* Allow span to shrink if needed */
  overflow: hidden; /* Prevent long text from breaking layout before ellipsis */
  white-space: nowrap; /* Keep text on one line for ellipsis */
  text-overflow: ellipsis; /* Show ellipsis for overflow */
}

.file-select-status-span.file-selected-badge {
  /* Original light mode badge style */
  background-color: #f1f3f5;
  color: #495057; /* Original text color for badge */
  padding: 8px 12px; /* Original padding */
  border-radius: 6px; /* Original border-radius */
  border: 1px solid #dee2e6; /* Original border */
  font-weight: normal; /* Original font-weight */
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis; /* This is now on the base .file-select-status-span */
  max-width: 280px;
  vertical-align: middle;
  display: inline-block;
  padding: 6px 10px; /* Adjusted padding for badge */
  /* white-space and overflow are now on the base class */
}

body.dark-mode .file-select-status-span.file-selected-badge {
  /* Original dark mode badge style */
  background-color: #343a40;
  border-color: #495057;
  color: #ced4da;
}

/* Main Action Buttons (Process/Generate) */
#processBtn,
#generateSheinLabelBtn {
  display: block;
  padding: 12px 22px; /* Slightly reduced padding */
  font-size: 1em;
  font-weight: 600; /* Less heavy */
  text-transform: none; /* No uppercase for modern简约 */
  letter-spacing: 0.3px; /* Less spacing */
}

/* Result Area */
#result, #sheinResult {
  margin-top: 24px; /* Reduced margin */
  padding: 16px 20px; /* Slightly reduced padding */
  border-radius: var(--border-radius-md);
  font-size: 0.95em;
  line-height: 1.7;
  border-width: 1px;
  border-style: solid;
  box-shadow: var(--shadow-sm);
}

#result p, #sheinResult p { margin: 0; } /* Already global reset */
#result p + p, #sheinResult p + p { margin-top: 8px; } /* Space between paragraphs in result */

#result.success, #sheinResult.success {
  /* Original success style */
  background-color: #d1e7dd;
  border-color: #a3cfbb;
  color: #0a3622;
}
body.dark-mode #result.success, body.dark-mode #sheinResult.success {
  /* Original dark mode success style */
  background-color: #1c3a27;
  border-color: #2c5c3c;
  color: #a6d1a4;
}

#result.error, #sheinResult.error {
  /* Original error style */
  background-color: #f8d7da;
  border-color: #f1aeB5;
  color: #58151c;
}
body.dark-mode #result.error, body.dark-mode #sheinResult.error {
  /* Original dark mode error style */
  background-color: #4a1c20;
  border-color: #7c2c32;
  color: #f4a9a8;
}

/* Post Process Action Buttons Container */
#pdfResizePostProcessActions,
#sheinPostProcessActions {
  margin-top: 20px;
  display: none; /* JS controls visibility */
  gap: 10px; /* Spacing between buttons */
  flex-wrap: wrap; /* Allow buttons to wrap on smaller screens if needed */
}
/* Ensure buttons inside these containers are displayed correctly */
#pdfResizePostProcessActions button,
#sheinPostProcessActions button {
  flex-grow: 1;
  min-width: 120px; /* Ensure buttons don't get too squished when wrapping */
}


/* Theme Toggle Button */
#themeToggleBtn {
  background-color: transparent;
  color: var(--text-color-muted); /* Icon color will inherit this */
  border: 1px solid transparent;
  padding: 0;
  border-radius: 50%;
  /* font-size is not needed as SVG has its own size */
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: none;

  margin-top: auto;
  align-self: center;
  margin-bottom: 10px;
  transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease;
}

/* Removed #themeToggleBtn svg.heroicon styles */

#themeToggleBtn:hover {
  background-color: var(--nav-link-hover-bg);
  border-color: var(--border-color-soft);
  transform: translateY(0);
  box-shadow: none;
}

/* Removed #themeToggleBtn:hover svg.heroicon styles */

/* Ensure the general #themeToggleBtn:hover styles are appropriate for text/emoji content */
/* The existing #themeToggleBtn:hover rule should be fine:
#themeToggleBtn:hover {
  background-color: var(--nav-link-hover-bg);
  border-color: var(--border-color-soft);
  transform: translateY(0);
  box-shadow: none;
}
*/
/* Also ensure #themeToggleBtn itself has appropriate font-size if it was removed previously */
/* Re-checking #themeToggleBtn base styles from earlier state:
#themeToggleBtn {
  background-color: transparent;
  color: var(--text-color-muted);
  border: 1px solid transparent;
  padding: 0;
  border-radius: 50%;
  font-size: 1.6em; // This was for icon, might need adjustment for emoji if too big
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: none;
  margin-top: auto;
  align-self: center;
  margin-bottom: 10px;
  transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease;
}
The font-size: 1.6em on #themeToggleBtn might make emojis large.
Let's ensure it's reasonable or revert to a previous state if necessary.
The original #themeToggleBtn (before any icon library) had:
  font-size: 1.5em;
  width: 40px;
  height: 40px;
This should be fine for emojis.
*/

/* Custom Scrollbar Styles */
.sidebar::-webkit-scrollbar,
.main-content::-webkit-scrollbar, /* Apply to main-content as well */
.view-container::-webkit-scrollbar { /* If view-container is the one scrolling */
  width: 7px;
}

.sidebar::-webkit-scrollbar-track,
.main-content::-webkit-scrollbar-track,
.view-container::-webkit-scrollbar-track {
  background: transparent;
}

.sidebar::-webkit-scrollbar-thumb,
.main-content::-webkit-scrollbar-thumb,
.view-container::-webkit-scrollbar-thumb {
  background-color: var(--border-color-soft); /* Original scrollbar thumb color */
  border-radius: 10px;
  border: 2px solid transparent; /* Creates padding effect */
  border: 1px solid #ced4da; /* Standard border color */
  border-radius: 8px; /* More rounded inputs */
  box-sizing: border-box;
  font-size: 1em; /* Standard font size */
  background-color: #ffffff;
  color: #495057;
  transition: border-color 0.2s ease, box-shadow 0.2s ease, background-color 0.4s ease, color 0.4s ease;
  width: 100%; /* Make inputs and selects take full width of their parent */
}

body.dark-mode input[type="text"],
body.dark-mode input[type="number"],
body.dark-mode input[type="color"],
body.dark-mode select {
  background-color: #252525; /* Slightly darker input background for dark mode */
  color: #e0e0e0;
  border-color: #555; /* Darker border */
}

input[type="text"]:focus,
input[type="number"]:focus,
input[type="color"]:focus,
select:focus {
  border-color: #007bff;
  box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.2); /* Softer focus shadow */
  outline: none;
}

body.dark-mode input[type="text"]:focus,
body.dark-mode input[type="number"]:focus,
body.dark-mode input[type="color"]:focus,
body.dark-mode select:focus {
  border-color: #0088ff;
  box-shadow: 0 0 0 0.2rem rgba(0, 136, 255, 0.25);
}

.dimension-inputs-container { /* Replaced #customSize with a class */
  margin-top: 10px; /* Further reduced margin */
  display: flex;
  gap: 12px; /* Slightly increased gap for clarity between width/height blocks */
  align-items: flex-start; /* Align items to the start for better error message placement below inputs */
  flex-wrap: nowrap;
}

/* This rule might be too broad or conflict if inputs are direct children, review if needed */
/* .dimension-inputs-container input[type="number"] { */
  /* flex-grow: 1; */ /* This should be on the input within .input-group */
  /* width: auto; */
/* } */

/* Input group for custom dimensions with units */
.dimension-inputs-container .input-group { /* Replaced #customSize with a class */
  position: relative; /* For absolute positioning of the unit */
  display: flex;
  align-items: center; /* Align input and unit vertically if needed */
  flex: 1; /* Allow each input group to grow and shrink equally */
  /* margin-bottom: 10px; */ /* Remove bottom margin if they are on the same line */
}

.dimension-inputs-container .input-group input[type="number"] { /* Replaced #customSize with a class */
  flex-grow: 1;
  padding-right: 38px; /* Slightly more space for unit */
  margin-bottom: 0;
  box-sizing: border-box;
}

.dimension-inputs-container .input-group .unit { /* Replaced #customSize with a class */
  position: absolute;
  right: 12px; /* Adjusted position */
  top: 50%;
  transform: translateY(-50%);
  font-size: 0.85em; /* Slightly smaller unit text */
  color: var(--text-color-muted);
  pointer-events: none;
}

body.dark-mode .dimension-inputs-container .input-group .unit { /* Replaced #customSize with a class */
  color: var(--dm-text-color-muted, #aaa); /* Dark mode unit color */
}

.dimension-inputs-container .field-wrapper {
  display: flex;
  flex-direction: column; /* Stack input-group and error message vertically */
  flex: 1; /* Allow each field (e.g., width, height) to take equal space if .dimension-inputs-container is a row */
  /* Add a small gap if multiple error messages could appear or for general structure, if needed */
  /* gap: 2px; */ /* Example: if error messages had variable height and you wanted consistent spacing */
}


/* Old Theme Toggle Button styles removed as it's now a positioned icon */

/* Process Button */
#processBtn {
  display: block;
  /* background-color, color, font-weight, text-transform, letter-spacing are now handled by .btn-primary or general button style */
  /* Retain specific font-weight or text-transform if desired, or let .btn-primary define it */
  font-weight: 700; /* Keep if specifically bolder than other .btn-primary */
  text-transform: uppercase; /* Keep if specifically uppercase */
  letter-spacing: 1px; /* Keep if specific spacing is desired */
}
/* #processBtn:hover - handled by .btn-primary:hover */
/* body.dark-mode #processBtn - handled by .btn-primary */
/* body.dark-mode #processBtn:hover - handled by .btn-primary:hover */

#generateSheinLabelBtn {
  display: block;
  /* Inherits .btn-primary styles for color, padding, etc. */
  font-weight: 700; /* Match #processBtn */
  text-transform: uppercase; /* Match #processBtn */
  letter-spacing: 1px; /* Match #processBtn */
}

/* Result Area */
#result, #sheinResult { /* Apply common result styling to sheinResult too */
  display: none; /* Hide by default */
  margin-top: 30px;
  padding: 18px 22px; /* More padding */
  border-radius: 8px;
  font-size: 1em;
  transition: background-color 0.4s ease, border-color 0.4s ease, color 0.4s ease, box-shadow 0.4s ease;
  line-height: 1.7; /* Better readability for results */
  box-shadow: 0 4px 8px rgba(0,0,0,0.04);
}

#result p, #sheinResult p {
  margin: 0;
}

#result.success, #sheinResult.success {
  background-color: #d1e7dd; /* Softer green */
  border: 1px solid #a3cfbb; /* Matching border */
  color: #0a3622; /* Darker green text */
}
body.dark-mode #result.success, body.dark-mode #sheinResult.success {
  background-color: #1c3a27; /* Dark green background */
  border-color: #2c5c3c; /* Matching dark border */
  color: #a6d1a4; /* Light green text */
}

#result.error, #sheinResult.error {
  background-color: #f8d7da; /* Softer red */
  border: 1px solid #f1aeB5; /* Matching border */
  color: #58151c; /* Darker red text */
}
body.dark-mode #result.error, body.dark-mode #sheinResult.error {
  background-color: #4a1c20; /* Dark red background */
  border-color: #7c2c32; /* Matching dark border */
  color: #f4a9a8; /* Light red text */
}

/* New Theme Toggle Button - Positioned Icon Button */
#themeToggleBtn {
  /* position: fixed; Removed */
  /* top: 25px; Removed */
  /* right: 25px; Removed */
  background-color: transparent;
  color: var(--text-color); /* Use text color for the icon */
  border: 1px solid transparent; /* Transparent border initially */
  padding: 0; /* Remove padding if using explicit width/height for centering */
  border-radius: 50%; /* Make it circular */
  cursor: pointer;
  font-size: 1.6em; /* Adjust icon size */
  line-height: 1; /* Ensure icon is centered in the button */
  /* z-index: 1000; Removed, may not be needed or adjust if necessary */
  width: 44px; /* Explicit width for a good click area */
  height: 44px; /* Explicit height */
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease;
  /* Override generic button styles if any still apply through specificity */
  font-weight: normal; /* Reset font-weight if inherited from generic button */
  letter-spacing: normal; /* Reset letter-spacing */
  text-transform: none; /* Reset text-transform */
  box-shadow: none; /* Remove generic button shadow */

  /* New styles for positioning within sidebar */
  margin-top: auto; /* Push to the bottom of the flex container (.sidebar) */
  align-self: center; /* Center horizontally within the sidebar */
  margin-bottom: 10px; /* Space from the bottom of the sidebar */
}

#themeToggleBtn:hover {
  background-color: var(--nav-link-hover-bg, #e9ecef); /* Use a subtle hover */
  border-color: var(--border-color-soft, #dee2e6);
}

body.dark-mode #themeToggleBtn {
  color: var(--text-color); /* Use reverted dark mode text color */
}

body.dark-mode #themeToggleBtn:hover {
  background-color: var(--nav-link-hover-bg); /* Use reverted dark mode nav link hover bg */
  border-color: var(--border-color-soft); /* Use reverted dark mode soft border */
}

/* Custom Scrollbar Styles */
/* For WebKit browsers (Chrome, Safari, Edge) */
.sidebar::-webkit-scrollbar,
.view-container::-webkit-scrollbar {
  width: 8px; /* Slimmer scrollbar */
}

.sidebar::-webkit-scrollbar-track,
.view-container::-webkit-scrollbar-track {
  background: transparent; /* Make track invisible */
  border-radius: 4px;
}

.sidebar::-webkit-scrollbar-thumb,
.view-container::-webkit-scrollbar-thumb {
  background-color: var(--border-color-soft, #cccccc); /* Scrollbar thumb color */
  border-radius: 4px;
  border: 2px solid transparent; /* Creates padding around thumb, making it effectively thinner */
  background-clip: content-box;
}

.sidebar::-webkit-scrollbar-thumb:hover,
.view-container::-webkit-scrollbar-thumb:hover {
  background-color: var(--primary-color, #007bff); /* Thumb color on hover */
}

body.dark-mode .sidebar::-webkit-scrollbar-thumb,
body.dark-mode .view-container::-webkit-scrollbar-thumb {
  background-color: var(--border-color-soft); /* Use reverted dark mode soft border */
}

body.dark-mode .sidebar::-webkit-scrollbar-thumb:hover,
body.dark-mode .view-container::-webkit-scrollbar-thumb:hover {
  background-color: var(--primary-color); /* Use reverted dark mode primary color */
}

/* For Firefox */
.sidebar,
.view-container {
  scrollbar-width: thin; /* "auto" or "thin" */
  scrollbar-color: var(--border-color-soft, #cccccc) transparent; /* thumb color track color */
}

body.dark-mode .sidebar,
body.dark-mode .view-container {
  scrollbar-color: var(--border-color-soft) transparent; /* Use reverted dark mode soft border */
}

/* Toast Notification Styles */
.toast-container {
  position: fixed;
  bottom: 20px;
  right: 20px;
  z-index: 1000; /* Ensure toasts are on top */
  display: flex;
  flex-direction: column-reverse; /* New toasts appear on top if stacked from bottom */
  gap: 10px;
}

.toast {
  padding: 12px 20px;
  border-radius: var(--border-radius-medium, 6px);
  color: var(--text-color-light, #fff); /* Default to light text, adjust per type */
  font-size: 0.9em;
  box-shadow: var(--shadow-md); /* Use consistent shadow from theme */
  opacity: 0; /* Start hidden, animation will make it visible */
  transform: translateY(15px); /* Start slightly lower for slide-in effect */
  animation: toast-slide-in 0.4s cubic-bezier(0.25, 0.8, 0.25, 1) forwards; /* Smoother easing */
  min-width: 250px;
  max-width: 350px;
  word-wrap: break-word;
}

@keyframes toast-slide-in {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Add a class for fade-out, to be triggered by JS before removal */
.toast.fade-out {
  animation: toast-fade-out 0.4s cubic-bezier(0.25, 0.8, 0.25, 1) forwards;
  /* Ensure it stays faded out if JS removal is delayed */
  opacity: 0;
  transform: translateY(15px); /* Match final state of fade-out animation */
}

@keyframes toast-fade-out {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
    transform: translateY(10px); /* Optional: slight move on fade out */
  }
}

.toast-success {
  background-color: var(--success-color, #28a745);
  color: var(--text-color-light, #fff);
}

.toast-error {
  background-color: var(--error-border-color, #dc3545); /* Using existing error border color for bg */
  color: var(--text-color-light, #fff);
}

.toast-info {
  background-color: var(--info-color, #17a2b8);
  color: var(--text-color-light, #fff);
}

.toast-warning {
  background-color: var(--warning-color, #ffc107);
  color: var(--text-color-dark, #212529); /* Warnings often have dark text on light bg */
}

/* Ensure CSS variables for toast colors are defined if not already */
/* These are examples, adjust to your theme's palette */
:root {
  --success-color: #28a745;
  --info-color: #17a2b8;
  --warning-color: #ffc107;
  /* --error-border-color is already defined */
  /* --text-color-light and --text-color-dark should ideally come from your theme variables */
}

body.dark-mode {
  /* Adjust toast type background/text colors for dark mode if needed */
  /* For example, if default success/info/error are too bright/dark */
  --success-color: #388e3c; /* Darker green for dark mode */
  --info-color: #0277bd;   /* Darker blue for dark mode */
  /* --error-border-color is already adapted for dark mode */
  --warning-color: #f57f17; /* Darker yellow/orange for dark mode */
  /* --text-color-light and --text-color-dark should be respected by default toast text colors */
}
